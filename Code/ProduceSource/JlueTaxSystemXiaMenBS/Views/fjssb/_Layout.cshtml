
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <!--允许搜索机器人搜索站内所有链接-->
    <meta content="all" name="robots">
    <meta name="Copyright" content="厦门税务版权所有 ">
    <meta name="Description" content="厦门税务网上报税系统">
    <meta name="Keywords" content="税务,厦门税务,网上报税系统">

    <title>
        厦门税务
    </title>
    <script src="/res/js/jquery-1.10.2.js"></script>
    <script src="/res/otp4/js/lib/layer/layer.js" type="text/javascript"></script>
    <link type="text/css" rel="styleSheet" href="/res/css/layerV2.css" />
    <script src="/res/js/common.js" type="text/javascript"></script>
    <script type="text/javascript" language="JavaScript" src="/res/js/common/components/inputCtrl.js?v1"></script>
    <link href="/res/css/v2.css" rel="stylesheet" type="text/css" />



    <meta charset="UTF-8">
    <meta name="decorator" content="blank" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />


    <c:set var="resV" value="v1" />
    <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

    <link href="/res/otp4/js/lib/ztree/css/zTreeStyle/zTreeStyle.css" rel="stylesheet" type="text/css" />
    <link href="/res/otp4/css/otp4-base.css?" rel="stylesheet" />
    <link href="/res/otp4/css/otp4-form.css?" rel="stylesheet" type="text/css" />
    <link href="/res/otp4/css/otp4-panel.css?" rel="stylesheet" type="text/css" />

    <link href="/res/otp4/css/otp4-page.css?" rel="stylesheet" type="text/css" />
    <link href="/res/otp4/css/otp4-menu.css?" rel="stylesheet" type="text/css" />
    <link href="/res/otp4/css/themes/otp4-menu.css?" rel="stylesheet" type="text/css" />
    <link href="/res/otp4/css/themes/otp4-form.css?" rel="stylesheet" type="text/css" />
    <link href="/res/otp4/css/themes/otp4-panel.css?" rel="stylesheet" type="text/css" />
    <link href="/res/otp4/css/themes/otp4-table.css?" rel="stylesheet" type="text/css" />

    <!--
    <script src="/res/otp4/js/lib/shiv/html5shiv.min.js" type="text/javascript"></script>
    <script src="/res/otp4/js/lib/shiv/respond.min.js" type="text/javascript"></script>
     -->
    <script src="/res/otp4/js/lib/jquery-ct.js" type="text/javascript"></script>
    <script src="/res/otp4/js/lib/jquery.fix.clone.js" type="text/javascript"></script>
    <script src="/res/otp4/js/lib/jquery.json.js" type="text/javascript"></script>
    <script src="/res/otp4/js/lib/layer/layer.js" type="text/javascript"></script>
    <script src="/res/otp4/js/lib/ztree/jquery.ztree.all-3.5.js" type="text/javascript"></script>
    <script src="/res/otp4/js/otp4-base.js?" type="text/javascript"></script>
    <script src="/res/otp4/js/otp4-utils.js?" type="text/javascript"></script>
    <script src="/res/otp4/js/otp4-core.js?" type="text/javascript"></script>
    <script src="/res/otp4/js/otp4-route.js?" type="text/javascript"></script>

    <script src="/res/otp4/js/lib/avalon.js?" type="text/javascript"></script>
    <!--  script src="/res/otp4/js/lib/avalon.shim.js" type="text/javascript"></script-->
    <script src="/res/otp4/js/otp4-iehack.js?" type="text/javascript"></script>

    <script src="/res/otp4/js/otp4-selmodel.js?" type="text/javascript"></script>

    <script src="/res/otp4/js/lib/My97DatePicker/WdatePicker.js?" type="text/javascript"></script>
    <script src="/res/otp4/js/otp4-expression.js?" type="text/javascript"></script>
    <script src="/res/otp4/js/otp4-controls.js?" type="text/javascript"></script>
    <script src="/res/otp4/js/otp4-upload.js?" type="text/javascript"></script>
    <script src="/res/otp4/js/otp4-validate.js?" type="text/javascript"></script>
    <script src="/res/otp4/js/otp4-validate-ext.js?" type="text/javascript"></script>
    <script src="/res/otp4/js/otp4-idcode.js?" type="text/javascript"></script>
    <script src="/res/otp4/js/otp4-froute.js?" type="text/javascript"></script>
    <script src="/res/otp4/js/otp4-filters.js?" type="text/javascript"></script>
    <script src="/res/otp4/js/otp4-menu.js?" type="text/javascript"></script>
    <script src="/res/otp4/js/otp4-menu-ie6.js?" type="text/javascript"></script>
    <script src="/res/js/otp4-app-config.js?" type="text/javascript"></script>
    <script src="/res/js/otp4-input-ext.js?" type="text/javascript"></script>

    <script src="/res/wsbs/js/bsfwzxmenu.js" type="text/javascript"></script>

    <link href="/res/wsbs/css/step.css" type="text/css" rel="stylesheet">
    <link href="/res/wsbs/css/global.css?" type="text/css" rel="stylesheet" id="mycss">
    <link href="/res/wsbs/css/xmdswz.css" type="text/css" rel="stylesheet">
    <link href="/res/wsbs/css/xmdswz_print.css" type="text/css" rel="stylesheet">
    <link href="/res/wsbs/css/swdj_style.css" type="text/css" rel="stylesheet">

    <script type="text/javascript" language="JavaScript" src="/res/js/common/core.js?"></script>
    <script type="text/javascript" language="JavaScript" src="/res/js/common/collections.js?"></script>
    <script type="text/javascript" language="JavaScript" src="/res/js/common/system.js?"></script>
    <script type="text/javascript" language="JavaScript" src="/res/js/common/ajaxrequest.js?"></script>
    <script type="text/javascript" language="JavaScript" src="/res/js/common/components/Behaviour.js?"></script>
    <script type="text/javascript" language="JavaScript" src="/res/js/common/components/floatlayer.js?"></script>

    <script type="text/javascript" language="JavaScript" src="/res/js/common/components/inputCtrl.js?"></script>
    <script language="javascript" type="text/javascript" src="/res/js/wssb/wssb_common.js?v=3"></script>
    <script language="javascript" type="text/javascript" src="/res/js/wssb/wssb_nssb.js?"></script>
    <script language="javascript" type="text/javascript" src="/res/js/wssb/wssb_qysds.js"></script>
    <script language="javascript" type="text/javascript" src="/res/js/wssb/wssb_grsds.js"></script>
    <link href="/res/jsdzsb/css.css" rel="stylesheet" type="text/css" />
    <script src="/res/jsdzsb/jsdzsb_common.js" type="text/javascript"></script>
    <link href="/res/css/css.css" rel="stylesheet" type="text/css" />
    <script src="/res/js/jquery-1.10.2.js" type="text/javascript"></script>
    <script src="/res/js/common.js" type="text/javascript"></script>
    <link href="/res/jsdzsb/css.css" rel="stylesheet" type="text/css" />
    <link href="/res/css/v2.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" charset="UTF-8">

        /**
        $(document).ready(function() {

            $(document).ajaxError(function(){ function(e,xhr,opt){
                    alert("登录超时,请重新登录！");
                    window.top.location.href="<c:url value="/login/index.do" />";}
            );

        });
        **/

    </script>
    <!--[if lt IE 9]>
          <script type="text/javascript" src="/res/PIE-1.0.0/PIE.js"></script>
          <script type="text/javascript">
            $(function() {
               if (window.PIE) {
                 $('.rad').each(function() {
                   PIE.attach(this);
                  });
                 }
               });
          </script>
        <![endif]-->

</head>

<body>






    <script type="text/javascript">
        function getObj(objName) {
            var obj = document.getElementById(objName);
            if(obj == null || obj == undefined)
                obj = document.getElementsByName(objName)[0];
            return obj;
        }


        $(function(){
            var divs=["yhssblb","yhstjsbjl","yhstxsbb"];
            var tzlx="@ViewBag.tzlx";
            for(var i=0;i<divs.length;i++){

                if(divs[i]==tzlx){
                    $("#"+divs[i]).show();
                }else{
                    $("#"+divs[i]).hide();
                }
            }

            var sjyzeNo = 0;
            var totalybzzs = 0.00;
            var totalzzsmdse = 0.00;
            var totalxfs = 0.00;
            var totalyys = 0.00;
            var totalhj = 0.00;
            var totalynse = 0.00;
            var totaljme = 0.00;
            var totaljzse = 0.00;
            var totalyjse = 0.00;
            var totalybtse = 0.00;
            if (getObj("tmp_count")) {
                sjyzeNo = getObj("tmp_count").value;
            }
            for (var i = 0 ; i < sjyzeNo ; i ++) {
                totalybzzs = totalybzzs + parseFloat(getObj("sbbList[" + i + "]['ybzzs']").value);
                totalzzsmdse = totalzzsmdse + parseFloat(getObj("sbbList[" + i + "]['zzsmdse']").value);
                totalxfs = totalxfs + parseFloat(getObj("sbbList[" + i + "]['xfs']").value);
                totalyys = totalyys + parseFloat(getObj("sbbList[" + i + "]['yys']").value);
                totalhj = totalhj + parseFloat(getObj("sbbList[" + i + "]['hj']").value);
                totalynse = totalynse + parseFloat(getObj("sbbList[" + i + "]['bqynse']").value);
                totaljme = totaljme + parseFloat(getObj("sbbList[" + i + "]['jme']").value);
                if(!getObj("sbbList[" + i + "]['jzse']")==undefined||!getObj("sbbList[" + i + "]['jzse']")==null){
                    totaljzse = totaljze + parseFloat(getObj("sbbList[" + i + "]['jzse']").value);
                }

                totalyjse = totalyjse + parseFloat(getObj("sbbList[" + i + "]['bqyjse']").value);
                totalybtse = totalybtse + parseFloat(getObj("sbbList[" + i + "]['bqybtse']").value);
            }
            if(totalybzzs=='0' || !totalybzzs){
                $("#_ybzzs").text("0") ;
            }else{
                $("#_ybzzs").text(add_Qfw(toFixedNum(totalybzzs,2)));
            }
            if(totalzzsmdse=='0' || !totalzzsmdse){
                $("#_zzsmdse").text("0") ;
            }else{
                $("#_zzsmdse").text(add_Qfw(toFixedNum(totalzzsmdse,2)));
            }
            if(totalxfs=='0' || !totalxfs){
                $("#_xfs").text("0") ;
            }else{
                $("#_xfs").text(add_Qfw(toFixedNum(totalxfs,2)) );
            }

            if(totalyys=='0' || !totalyys){
                $("#_yys").text("0") ;
            }else{
                $("#_yys").text(add_Qfw(toFixedNum(totalyys,2)) );
            }
            if(totalhj=='0' || !totalhj){
                $("#_hj").text("0") ;
            }else{
                $("#_hj").text(add_Qfw(toFixedNum(totalhj,2)) );
            }
            if(totalynse=='0' || !totalynse){
                $("#_bqynse").text("0") ;
            }else{
                $("#_bqynse").text(add_Qfw(toFixedNum(totalynse,2)));
            }
            if(totaljme=='0' || !totaljme){
                $("#_jme").text("0") ;
            }else{
                $("#_jme").text(add_Qfw(toFixedNum(totaljme,2)));
            }
            if(totalyjse=='0' || !totalyjse){
                $("#_bqyjse").text("0") ;
            }else{
                $("#_bqyjse").text(add_Qfw(toFixedNum(totalyjse,2)));
            }
            if(totalybtse=='0' || !totalybtse){
                $("#_bqybtse").text("0") ;
            }else{
                $("#_bqybtse").text(add_Qfw(toFixedNum(totalybtse,2)));
            }
            if(totaljzse=='0' || !totaljzse){
                $("#_bqjzse").text("0") ;
            }else{
                $("#_bqjzse").text(add_Qfw(toFixedNum(totaljzse,2)));
            }
            szChange();

            //删除减征的代码
            $("#ssjmxzdm option[value='0007049901']").remove();

            //是否小规模减征纳税人
            var flag = $("input[name='isXgm']").val();
            //         var jzbl = $("input[name='xgmjzbl']").val();
            if(flag=="N"){
                $("#_xgmFalse").attr('checked', 'checked');
                $("#_xgmTrue").removeAttr("checked");
            }
            //是否有填写申报列表
            var _sbbList = "[{HJ=10000.00, sfzhm=, xh=c348cd9a90ec40669738f2aa9a33b1e6, zzsxselx_dm=12, YYS=0.00, KBXH=c348cd9a90ec40669738f2aa9a33b1e6, ybzzs=10000.00, rdpzuuid=8046254ED74D7592E05338401B518905, xgmjzbl=0.0, kyjse=0.0, jme=50.00, ZZSMDSE=0.00, tbrq=2019-03-06, zspmdm=101090101, yhpzuuid=, pzxh=, XFS=0.00, bqybtse=650.00, sfyj=, zzsmdse=0.00, sfzf=, yys=0.00, xfs=0.00, qzdje=, sfjm=N, zsxmdm=10109, bqjzse=0.0, JME=50.00, yjskuuid=, BQYNSE=700.00, YBZZS=10000.00, slrq=2019-03-06, hj=10000.00, jmxzdm=0001011811, XH=c348cd9a90ec40669738f2aa9a33b1e6, BQYJSE=0.00, bqynse=700.00, sl1=0.07, skssqz=2019-02-28, sffjjm=Y, jzxzdm=0007049901, skssqq=2019-02-01, SL1=0.07, kjmse=, yyqzdje=, xshjs=17000, jzswsxdm=SXA031900988, BQYBTSE=650.00, bqyjse=0.00, kbxh=c348cd9a90ec40669738f2aa9a33b1e6}, {sfzhm=, xh=520398b77f0000013edd237ab03f878b, zzsxselx_dm=12, slrq=2019-03-06, hj=10000.00, jmxzdm=0061042802, bqynse=300.00, ybzzs=10000.00, xgmjzbl=0.0, rdpzuuid=8046254ED74E7592E05338401B518905, kyjse=0.0, sl1=0.03, jme=300.00, isChecked=null, jcx=0, skssqz=2019-02-28, tbrq=2019-03-06, sybh=, sffjjm=Y, zspmdm=302030100, jzxzdm=0061049901, skssqq=2019-02-01, ysx=0, yhpzuuid=, zszm_dm=, pzxh=, kjmse=, yyqzdje=, sybzdm=, bqybtse=0.00, xshjs=17000, sfyj=, zzsmdse=0.00, yys=0.00, sfzf=, xfs=0.00, qzdje=, sfjm=N, sskcs=0, zsxmdm=30203, jzswsxdm=SXA031900993, bqjzse=0.00, bqyjse=0.00, yjskuuid=, kbxh=c348cd9a90ec40669738f2aa9a33b1e6}, {sfzhm=, xh=520398ba7f0000013edd237ab84a2eef, zzsxselx_dm=12, slrq=2019-03-06, hj=10000.00, jmxzdm=0061042802, bqynse=200.00, ybzzs=10000.00, xgmjzbl=0.0, rdpzuuid=8046254EDB29756EE05338401B518A27, kyjse=0.0, sl1=0.02, jme=200.00, isChecked=null, jcx=0, skssqz=2019-02-28, tbrq=2019-03-06, sybh=, sffjjm=Y, zspmdm=302160100, jzxzdm=0099049901, skssqq=2019-02-01, ysx=0, yhpzuuid=, zszm_dm=, pzxh=, kjmse=, yyqzdje=, sybzdm=, bqybtse=0.00, xshjs=17000, sfyj=, zzsmdse=0.00, yys=0.00, sfzf=, xfs=0.00, qzdje=, sfjm=N, sskcs=0, zsxmdm=30216, jzswsxdm=SXA031900994, bqjzse=0.00, bqyjse=0.00, yjskuuid=, kbxh=c348cd9a90ec40669738f2aa9a33b1e6}]";
            if(_sbbList!=undefined&&_sbbList!=null&&_sbbList!="[]"){
                $("input:radio").attr("disabled","disabled");
            }
            //  if((flag!=undefined&&flag=="Y")||jzbl>0){
            //	  $("#_xgmFalse").removeAttr("checked");
            //	  $("#_xgmTrue").attr("checked","checked");
            //  }
        });

        //重置小规模选项
        function resetSelect(id){
            //是否有填写申报列表
            // 	   var _sbbList = "[{HJ=10000.00, sfzhm=, xh=c348cd9a90ec40669738f2aa9a33b1e6, zzsxselx_dm=12, YYS=0.00, KBXH=c348cd9a90ec40669738f2aa9a33b1e6, ybzzs=10000.00, rdpzuuid=8046254ED74D7592E05338401B518905, xgmjzbl=0.0, kyjse=0.0, jme=50.00, ZZSMDSE=0.00, tbrq=2019-03-06, zspmdm=101090101, yhpzuuid=, pzxh=, XFS=0.00, bqybtse=650.00, sfyj=, zzsmdse=0.00, sfzf=, yys=0.00, xfs=0.00, qzdje=, sfjm=N, zsxmdm=10109, bqjzse=0.0, JME=50.00, yjskuuid=, BQYNSE=700.00, YBZZS=10000.00, slrq=2019-03-06, hj=10000.00, jmxzdm=0001011811, XH=c348cd9a90ec40669738f2aa9a33b1e6, BQYJSE=0.00, bqynse=700.00, sl1=0.07, skssqz=2019-02-28, sffjjm=Y, jzxzdm=0007049901, skssqq=2019-02-01, SL1=0.07, kjmse=, yyqzdje=, xshjs=17000, jzswsxdm=SXA031900988, BQYBTSE=650.00, bqyjse=0.00, kbxh=c348cd9a90ec40669738f2aa9a33b1e6}, {sfzhm=, xh=520398b77f0000013edd237ab03f878b, zzsxselx_dm=12, slrq=2019-03-06, hj=10000.00, jmxzdm=0061042802, bqynse=300.00, ybzzs=10000.00, xgmjzbl=0.0, rdpzuuid=8046254ED74E7592E05338401B518905, kyjse=0.0, sl1=0.03, jme=300.00, isChecked=null, jcx=0, skssqz=2019-02-28, tbrq=2019-03-06, sybh=, sffjjm=Y, zspmdm=302030100, jzxzdm=0061049901, skssqq=2019-02-01, ysx=0, yhpzuuid=, zszm_dm=, pzxh=, kjmse=, yyqzdje=, sybzdm=, bqybtse=0.00, xshjs=17000, sfyj=, zzsmdse=0.00, yys=0.00, sfzf=, xfs=0.00, qzdje=, sfjm=N, sskcs=0, zsxmdm=30203, jzswsxdm=SXA031900993, bqjzse=0.00, bqyjse=0.00, yjskuuid=, kbxh=c348cd9a90ec40669738f2aa9a33b1e6}, {sfzhm=, xh=520398ba7f0000013edd237ab84a2eef, zzsxselx_dm=12, slrq=2019-03-06, hj=10000.00, jmxzdm=0061042802, bqynse=200.00, ybzzs=10000.00, xgmjzbl=0.0, rdpzuuid=8046254EDB29756EE05338401B518A27, kyjse=0.0, sl1=0.02, jme=200.00, isChecked=null, jcx=0, skssqz=2019-02-28, tbrq=2019-03-06, sybh=, sffjjm=Y, zspmdm=302160100, jzxzdm=0099049901, skssqq=2019-02-01, ysx=0, yhpzuuid=, zszm_dm=, pzxh=, kjmse=, yyqzdje=, sybzdm=, bqybtse=0.00, xshjs=17000, sfyj=, zzsmdse=0.00, yys=0.00, sfzf=, xfs=0.00, qzdje=, sfjm=N, sskcs=0, zsxmdm=30216, jzswsxdm=SXA031900994, bqjzse=0.00, bqyjse=0.00, yjskuuid=, kbxh=c348cd9a90ec40669738f2aa9a33b1e6}]";
            // 	   if(_sbbList!=undefined&&_sbbList!=null&&_sbbList!="[]"){
            // 		   alert("已经有申报数据,不能变更小规模纳税人设置，请先删除数据!");
            // 	  		return;
            // 	   }
            var isXgm = $("input[name='isXgm']").val();
            if(isXgm =="Y"){
                $("input[name='isXgm']").val("N");
            }else{
                $("input[name='isXgm']").val("Y");
            }


        };

        function tjsbjl(){
            /*
            var sfzhm=getObj("sbbVo['sfzhm']").value;
            if(sfzhm=='' || sfzhm==null){
                alert("身份证号码必须填写！");
                return false;
            }
            */


            $("#myForm1").attr("action","/jsdzsb/fjssb/tjsbjl.do");
            $("#myForm1").submit();
        }
        function tjsbb(){
            $("#myForm1").attr("action","/jsdzsb/fjssb/tjsblb.do");
            $("#myForm1").submit();
        }
        function tjsbbsb(){
            /*
         var sfzhm=getObj("sbbVo['sfzhm']").value;
	     if(sfzhm=='' || sfzhm==null){
		  alert("身份证号码必须填写！");
		  return false;
	     }
          */
            var _confMsg = "请确认是否提交申报。提交申报后，可通过“申报记录查询或作废”菜单项查询申报结果。";
            var xgbz=document.getElementById("xgbz").value;
            if (confirm(_confMsg)) {
                if(xgbz=='yes')
                    $("#myForm1").attr("action","/jsdzsb/fjssb/tjfjs.do");
                else
                    $("#myForm1").attr("action","/jsdzsb/fjssb/tjsblbsb.do");
                $("#myForm1").submit();
            }
        }
        function qxbcsb(){
            var xgbz=document.getElementById("xgbz");
            if(confirm("是否确定取消本次申报？")){
                if(xgbz=='no')
                    location.href="/jsdzsb/fjssb/index.do";
                else
                    location.href="/jsdzsb/fjssb/index.do?xgbz=yes";
            }
        }
        function txsbb(){
            /*
                  if( xshjsChange() ){

                    }else{
                    return false;
                    }
            */

            var xgbz="no";
            var zspmdm=getObj("sbbVo['zspmDm']").value;
            var xshjs=getObj("sbbVo['zzsxselx_dm']").value;
            if(xshjs==null || xshjs==''){
                alert("请选择销售合计数！");
                return;
            }
            getObj("sbbVo['sffjjm']").value="Y";
            /* if( zspmdm == "101090101" || zspmdm == "101090102"|| zspmdm == "101090103"  || zspmdm == "101090201" ||
                    zspmdm == "101090202" || zspmdm == "101090203" || zspmdm == "101090301" || zspmdm == "101090302" ||zspmdm == "101090303" ||
                    zspmdm == "101099901" || zspmdm == "101099902"
                ){
                getObj("sbbVo['sffjjm']").value="Y";




             }else{

                getObj("sbbVo['sffjjm']").value="N";
             }
              */
            var zsxmdm=getObj("sbbVo['zsxmDm']").value;
            if(zsxmdm=='' || zsxmdm==null){
                if(xgbz!="yes"){
                    alert("征收项目必须选择！");
                    return false;
                }
            }

            if(zspmdm=='' || zspmdm==null){
                if(xgbz!="yes"){
                    alert("征收品目必须选择！");
                    return false;
                }
            }


            var nsqxdm="";
            var sbqxdm="";



            if('30216'==zsxmdm && '302160100'==zspmdm ){
                nsqxdm='06';
                sbqxdm="04";
            }



            if('10109'==zsxmdm && '101090101'==zspmdm ){
                nsqxdm='06';
                sbqxdm="04";
            }



            if('30203'==zsxmdm && '302030100'==zspmdm ){
                nsqxdm='06';
                sbqxdm="04";
            }


            var skssqq=getObj("sbbVo['skssqq']").value;
            var skssqz=getObj("sbbVo['skssqz']").value;
            if(xgbz!="yes")
                if(!JsYsqbChecker(skssqq,skssqz,zsxmdm,zspmdm,nsqxdm,sbqxdm)){
                    return false;
                }
            var xgbz="no";
            if(xgbz=="yes")
                $("#myForm2").attr("action","/jsdzsb/fjssb/xgmap.do");
            else
                $("#myForm2").attr("action","/jsdzsb/fjssb/txsbb.do");
            $("#myForm2").submit();
            /*
		     var _confMsg = "请确认是否提交？";
		  if (confirm(_confMsg)) {
		  $("#myForm1").attr("action","/jsdzsb/fjssb/tjsblbsb.do");
		  $("#myForm1").submit();
		  }
		  $("#myForm2").attr("action","/jsdzsb/fjssb/txsbb.do");
		  $("#myForm2").submit();
			  */
        }


        function qrtj(flag){

            var options=$("#ssjmxzdm option:selected");//获取减免性质当前选择项.
            // getObj("sbbVo['jmxzDmMc']").value=options.text();//获取减免性质当前选择项的文本.

            var  hj=getObj("sbbVo['hj']").value;
            var  zzsxselx_dm  ='@ViewBag.zzsxselx_dm';
            if(hj==""  ){
                alert("合计不能为空，请填写对应的税额！");
                return false;
            }
            var jsjeObj = getObj("sbbVo['hj']");

            var JSJE = getoff_Qfw(jsjeObj.value);

            var jsjeNum = new Number(JSJE);

            if(jsjeNum.lessThan(0)) {
                alert("计税金额不能为负数！");
                jsjeObj.focus();
                return false;
            }


            var ynseObj = getObj("sbbVo['bqynse']");

            var YNSE = getoff_Qfw(ynseObj.value);

            var ynseNum = new Number(YNSE);
            if(ynseNum.lessThan(0)) {
                alert("应纳税（费）额不能为负数！");
                ynseObj.focus();
                return false;
            }

            var ssjmxzdm=getObj("sbbVo['jmxzDm']").value;
            var ynse=getObj("sbbVo['bqynse']").value;

            // 本期应纳税额
            var __bqynse = getObj("sbbVo['bqynse']").value;
            __bqynse = getoff_Qfw(__bqynse);
            // 减免额
            var __jme = getObj("sbbVo['jme']").value;
            __jme = getoff_Qfw(__jme);
            __jme = __jme == "" ? "0.0" : __jme;
            // 本期已缴税（费）额
            var __yje=getObj("sbbVo['bqyjse']").value;
            __yje = getoff_Qfw(__yje);
            if (parseFloat(__yje) + parseFloat(__jme) > parseFloat(__bqynse)) {
                alert("本期已缴税（费）额+ 本期减免税（费）额不能大于 本期应纳税（费）额" );
                return false;
            }
            if(zzsxselx_dm=='13' || zzsxselx_dm=='23'){
                if(__yje>0){
                    var jyffjyjse=getObj("sbbVo['jyffjyjse']").value;
                    jyffjyjse = getoff_Qfw(jyffjyjse);
                    var dfjyffjyjse=getObj("sbbVo['dffjjyjse']").value;
                    dfjyffjyjse = getoff_Qfw(dfjyffjyjse);
                    if(jyffjyjse=='' || dfjyffjyjse==''){
                        alert("城建税本期已缴税（费）额大于0，教育费附加、地方教育附加本期已缴不能为空。");
                        return false;
                    }
                }
            }
            var sfjm=getObj("sbbVo['sfjm']").value;
            var jme=getObj("sbbVo['jme']").value;
            if(ssjmxzdm!='' &&  parseFloat(YNSE)>0){
                if(jme=='' ||jme =='0' ){
                    alert("您已选择减免性质，请输入减免额！");
                    return false;
                }
            }else{
                sfjm="N";
            }
            var xgbz=document.getElementById("xgbz").value;
            if(sfjm=="N" && ssjmxzdm!='' && ssjmxzdm!='0099042801'){
                if(confirm("您选择的减免性质尚未到主管税务机关备案，请申报后尽快完成备案!")){
                    if(flag=='modify'){
                        if(xgbz=='yes')
                            $("#myForm3").attr("action","/jsdzsb/fjssb/xgbb.do");
                        else
                            $("#myForm3").attr("action","/jsdzsb/fjssb/modifySave.do");
                        $("#myForm3").submit();
                    }else{
                        $("#myForm3").attr("action","/jsdzsb/fjssb/submitSbb.do");
                        $("#myForm3").submit();

                    }

                }
            }else{
                if(flag=='modify'){
                    if(xgbz=='yes')
                        $("#myForm3").attr("action","/jsdzsb/fjssb/xgbb.do");
                    else
                        $("#myForm3").attr("action","/jsdzsb/fjssb/modifySave.do");
                    $("#myForm3").submit();
                }else{
                    $("#myForm3").attr("action","/jsdzsb/fjssb/submitSbb.do");
                    $("#myForm3").submit();

                }
            }

        }

    </script>

    <div id='yhssblb'>
        <form action="/jsdzsb/yhssb/lb.do" method="post" id="myForm1">
            <input type="hidden" name="errAction" value="/jsdzsb/fjssb/lb.do" />
            <input type="hidden" name="nsqx_dm" value="06" /> <input type="hidden" name="xms" value="10109" /> <input type="hidden"
                                                                                                                      name="xgbz" id="xgbz" value="no">
            <table width="100%" border="0" cellspacing="0" cellpadding="0">
                <tr>
                    <td align="left" class="liucheng_01"></td>
                    <td align="left">
                        <table width="750" border="0" align="left"
                               cellpadding="0" cellspacing="0">
                </tr>
                <tr>
                    <td>&nbsp;</td>
                    <td align="center" class="liucheng_02 h1_14w v2_h1_14w">初始化</td>
                    <td align="center">
                        <img src="/res/jsdzsb/bsdt/images/over_arrow.png" width="7"
                             height="12" />
                    </td>
                    <td align="center" class="liucheng_02 h1_14w v2_h1_14w">填写申报表</td>



                    <td align="center">
                        <img src="/res/jsdzsb/bsdt/images/off_arrow.png" width="7"
                             height="12" />
                    </td>
                    <td align="center" class="liucheng_03 h1_14b v2_h1_14b">确认申报</td>



                    <td align="center">
                        <img src="/res/jsdzsb/bsdt/images/off_arrow.png" width="7"
                             height="12" />
                    </td>
                    <td align="center" class="liucheng_03 h1_14b v2_h1_14b">查看回执</td>
                </tr>
            </table></td>
            </tr>
            </table>
            </td>
            </tr>
            <tr>
                <td class="gray3_bg_color"></td>
            </tr>
            <tr>
                <td>
                    <table width="1200" border="0" align="center" cellpadding="0"
                           cellspacing="0" style="margin-top:30px;">
                        <tr>
                            <td align="center" class="h16_bold v2_title">
                                <p>城建税、教育费附加、地方教育附加税（费）申报表</p>
                            </td>
                        </tr>
                        <td>
                            <table border="1" class="v2table" cellspacing="0" cellpadding="0"
                                   width="100%">

                                @RenderBody()
                                @if (ViewBag.tzlx == "yhssblb") { Html.RenderAction("showData_Partial", new { init = ViewBag.init }); }
                                
                            </table>
                        </td>
            </tr>
            <tr>
                <div align="center">
                    <td>

                        <p align="left">
                            <div align="center" class="marg_top12">

                                <input type="button" class="bottBlue rad" onclick="tjsbjl()"
                                       value="添加申报记录" />&nbsp;&nbsp;&nbsp;&nbsp;

                                <span style="line-height:1.5;color:red">


                                    <input type="button" class="bottBlue rad" value="确认提交" id="submitList" onclick="tjsbb()" @if (ViewBag.init == true) { @Html.Raw("disabled");} />

                                    &nbsp;&nbsp;&nbsp;&nbsp;<input type="button"
                                                                   class="bottBlue rad" onclick="qxbcsb()" value="取消本次申报"
                                                                   align="right">
                                </span>
                            </div>
                        </p>
                    </td>
                    <p>&nbsp;</p>
                </div>
            </tr>
            </table>
            </td>
            </tr>
            </table>
        </form>
    </div>
    <div id="yhstjsbjl">
        @{Html.RenderAction("tjsbjl_Partial", (object)Model);}
    </div>

    <div id="yhstxsbb">
        @{Html.RenderAction("txsbb_Partial");}
    </div>
    <script type="text/javascript">
<!--
//税种变更时同步更新税目（营业税要更新输入项）


function szChange() {
  var szObj = getObj("sbbVo['zsxmDm']");
  var smObj = getObj("sbbVo['zspmDm']");
  var szmcObj = getObj("SZ_MC");
  var sz_id = szObj.value;
  var sm_id = smObj.value;


	if( sm_id == "101090101" || sm_id == "101090201" || sm_id == "101090301" || sm_id == "302030100" || sm_id == "302160100"){
	    getObj("sbbVo['xfs']").readOnly = true;
	    getObj("sbbVo['yys']").readOnly = true;
	    getObj("sbbVo['xfs']").value = "";
	    getObj("xfs").style.color = "#D0D0D0";
	    getObj("sbbVo['xfs']").style.backgroundColor="#D0D0D0";
	    getObj("sbbVo['yys']").value = "";
	     getObj("yys").style.color = "#D0D0D0";
	    getObj("sbbVo['yys']").style.backgroundColor="#D0D0D0";

	    getObj("sbbVo['ybzzs']").readOnly = false;
	    getObj("sbbVo['zzsmdse']").readOnly = false;

	    //  getObj("ybzzs").style.color = "#0000FF";
	     getObj("sbbVo['ybzzs']").style.backgroundColor="";
	    //  getObj("zzs_mdse").style.color = "#0000FF";
	     getObj("sbbVo['zzsmdse']").style.backgroundColor="";
	     // getObj("zzs").style.color = "#0000FF";


	}
	//var baztPara =getObj("sbbVo['BAZTBJ']").value;

	if( sm_id == "101090102" || sm_id == "101090202" || sm_id == "101090302" || sm_id == "302160200" || sm_id == "302030200"){
	    getObj("sbbVo['xfs']").readOnly = true;
	    getObj("sbbVo['ybzzs']").readOnly = true;
	    getObj("sbbVo['zzsmdse']").readOnly = true;
	    getObj("sbbVo['xfs']").value = "";
	    getObj("sbbVo['ybzzs']").value = "";
	    getObj("sbbVo['zzsmdse']").value = "";

	    getObj("ybzzs").style.color = "#D0D0D0";
	     getObj("sbbVo['ybzzs']").style.backgroundColor="#D0D0D0";
	     getObj("zzs_mdse").style.color = "#D0D0D0";
	     getObj("sbbVo['zzsmdse']").style.backgroundColor="#D0D0D0";
	      getObj("xfs").style.color = "#D0D0D0";
	     getObj("sbbVo['xfs']").style.backgroundColor="#D0D0D0";
	    //  getObj("zzs").style.color = "#D0D0D0";

	    // getObj("yys").style.color = "#0000FF";
	     getObj("sbbVo['yys']").style.backgroundColor="";

	     getObj("sbbVo['yys']").readOnly = false;
	}

	if( sm_id == "101090103" || sm_id == "101090203" || sm_id == "101090303" || sm_id == "302160300" || sm_id == "302030300"){
	    getObj("sbbVo['yys']").readOnly = true;
	    getObj("sbbVo['ybzzs']").readOnly = true;
	    getObj("sbbVo['zzsmdse']").readOnly = true;
	    getObj("sbbVo['yys']").value = "";
	    getObj("sbbVo['ybzzs']").value = "";
	    getObj("sbbVo['zzsmdse']").value = "";

	     getObj("ybzzs").style.color = "#D0D0D0";
	     getObj("sbbVo['ybzzs']").style.backgroundColor="#D0D0D0";
	     getObj("zzs_mdse").style.color = "#D0D0D0";
	     getObj("sbbVo['zzsmdse']").style.backgroundColor="#D0D0D0";


	     getObj("yys").style.color = "#D0D0D0";
	     getObj("sbbVo['yys']").style.backgroundColor="#D0D0D0";

	     getObj("sbbVo['xfs']").readOnly = false;
	   //  getObj("xfs").style.color = "#0000FF";
	     getObj("sbbVo['xfs']").style.backgroundColor="";
	}

  return true;
}

//计算计税金额
function calcYnssde() {
  var zzs_ybzzsVal = getObj("sbbVo['ybzzs']").value;
  var zzs_mdseVal = getObj("sbbVo['zzsmdse']").value;
  var xfsVal = getObj("sbbVo['xfs']").value;
  var yysVal = getObj("sbbVo['yys']").value;
  var xsehj = getoff_Qfw(getObj("xshjs").value);

  //var ZZSXSELX_DM = getObj("sbbVo['ZZSXSELX_DM']").value;
  var ZZSXSELX_DM = $('#ZZSXSELX_DM').val();
  var nsqx_dm = getoff_Qfw(getObj("nsqx_dm").value);
  zzs_ybzzsVal = getoff_Qfw(zzs_ybzzsVal);
  zzs_mdseVal = getoff_Qfw(zzs_mdseVal);
  xfsVal = getoff_Qfw(xfsVal);
  yysVal = getoff_Qfw(yysVal);

  if(isEmpty(zzs_ybzzsVal)) zzs_ybzzsVal = 0;
  if(isEmpty(zzs_mdseVal)) zzs_mdseVal = 0;
  if(isEmpty(xfsVal)) xfsVal = 0;
  if(isEmpty(yysVal)) yysVal = 0;
  var hj=toFixedNum( ( parseFloat(zzs_ybzzsVal) + parseFloat(zzs_mdseVal) + parseFloat(xfsVal) + parseFloat(yysVal)), 2);
    if(ZZSXSELX_DM=='11' || ZZSXSELX_DM=='12' || ZZSXSELX_DM=='21' || ZZSXSELX_DM=='22'){
       if(ZZSXSELX_DM=='11' || ZZSXSELX_DM=='21'){
    	   xsehj=0;
    	}else if(ZZSXSELX_DM=='12' && nsqx_dm=='06'){
    		 xsehj=17000;
		  }else if(ZZSXSELX_DM=='22' && nsqx_dm=='08'){
			  xsehj=51000;
		  }
       getObj("xshjs").value=xsehj;
	   getObj("sbbVo['xshjs']").value=xsehj;
	if(hj>xsehj){
		  getObj("sbbVo['ybzzs']").value='';
		  getObj("sbbVo['zzsmdse']").value='';

		 /* if(ZZSXSELX_DM=='11' && nsqx_dm=='06'){
		  alert("合计不能大于30000!");
		  }else if(ZZSXSELX_DM=='21' && nsqx_dm=='08'){
		  alert("合计不能大于90000!");
		  }else if(ZZSXSELX_DM=='12' && nsqx_dm=='06'){
		  alert("合计不能大于100000!");
		  }else if(ZZSXSELX_DM=='22' && nsqx_dm=='08'){
		  alert("合计不能大于300000!");
		  }
		  */

		  alert("增值税额合计数”与“本月（季）销售额合计数”的选项不匹配，请重新选择!");
		return false;
	}
    }
  getObj("sbbVo['hj']").value = getoff_Qfw(hj);
  return true;


}



//计算应纳税额
function calcYhse() {
  var jsjeVal = getObj("sbbVo['hj']").value;
  var slVal = getObj("sbbVo['sl1']").value;

  jsjeVal = getoff_Qfw(jsjeVal);
  slVal = getoff_Qfw(slVal);

  if(isEmpty(jsjeVal)) jsjeVal = 0;
  if(isEmpty(slVal)) slVal = 0;

  getObj("sbbVo['bqynse']").value = getYnse(jsjeVal, slVal, 0, 1);
  change_amt(getObj("sbbVo['bqynse']"));
  calcSjjne();
}

//计算实际缴纳额
function calcSjjne() {
  var ynseVal = getObj("sbbVo['bqynse']").value;

  var jmxzDm = getObj("sbbVo['jmxzDm']").value;
  if(jmxzDm=="0099042801"){
    getObj("sbbVo['jme']").value = ynseVal;
  }

  var jmeVal = getObj("sbbVo['jme']").value;
  var yjVal = getObj("sbbVo['bqyjse']").value;

  ynseVal = getoff_Qfw(ynseVal);
  jmeVal = getoff_Qfw(jmeVal);
  yjVal = getoff_Qfw(yjVal);
  if(!isNumeric(yjVal)) yjVal = 0;
  yjVal = parseFloat(yjVal);


  getObj("sbbVo['bqybtse']").value = getSjjne(ynseVal, yjVal, jmeVal, 0);

  change_amt(getObj("sbbVo['bqybtse']"));

}

function sdeChange() {
	kkcyyhChange();

	  return true;
	}

function xshjsChange() {
	var xshjs=getObj("xshjs").value;
	var nsqx_dm=getObj("nsqx_dm").value;
	 xshjs = getoff_Qfw(xshjs);
	 var _confMsg = "若您的增值税入库税款为0 ，您可免于零申报";
	 if( (xshjs<=30000) && (nsqx_dm=="06") ){
	     if (confirm(_confMsg)) {
			  return true;
		  }else{
		  window.location.href="/jsdzsb/fjssb/lb.do";
		  }
	 }else if((xshjs<=90000) && (nsqx_dm=="08")){
	       if (confirm(_confMsg)) {
			  return true;
		  }else{
		  window.location.href="/jsdzsb/fjssb/lb.do";
		  }
	 }else{
	   return true;
	 }

	}
function kkcyyhChange() {
	 if(!calcYnssde()) calcYnssde();
	  jsjeChange();
	  return true;
	}

	function jsjeChange() {
	  calcYhse();

	  calcSjjne();
	  return true;
	}


	function yjeChange() {
      var yjskuuid=getObj("yjskuuid").value;
      var kyjse=getObj("sbbVo['kyjse']").value;
      kyjse = getoff_Qfw(kyjse);
      var yje=getObj("sbbVo['bqyjse']").value;
      yje = getoff_Qfw(yje);
      //if(parseFloat(yje)>parseFloat(kyjse)){
       //alert("本期已缴税（费）额不能大于可缴税（费）额，可缴税（费）额为"+kyjse);
       //getObj("sbbVo['bqyjse']").value="";
       //getObj("sbbVo['yjskuuid']").value="";
      //};
      getObj("sbbVo['yjskuuid']").value=yjskuuid;
	  calcSjjne();
	  return true;
	}

	function jmeChange() {
		//yhpzuuid
	   getObj("sbbVo['yhpzuuid']").value="";
	   var ssjmxzDm=getObj("sbbVo['jmxzDm']").value;
	   var jme=getObj("sbbVo['jme']").value;
	   var qzdje=getObj("sbbVo['qzdje']").value;
	   var ynse=getObj("sbbVo['bqynse']").value;
       if(ssjmxzDm==""){
         getObj("sbbVo['jme']").value="";
         return false;
       };
       jme=getoff_Qfw(jme);
       ynse=getoff_Qfw(ynse);
       if(jme==""  ){
          return false;
         };
         if(parseFloat(jme)>parseFloat(ynse)){
      	   alert("减免额不能大于本期应纳税额！");
      	  getObj("sbbVo['jme']").value="";
       	  return false;
            }
       getObj("sbbVo['sfjm']").value='N';
       if(jme<qzdje){
        alert("减免额小于起征点金额，默认减免!");
        getObj("sbbVo['jmxzDm']").value="";
        getObj("sbbVo['yyqzdje']").value=jme;
        return false;
       }
       var flag='N';
       var jzed="";

	  jzed=getoff_Qfw(jzed);
	  if(flag=='Y'){
		 getObj("sbbVo['kjmse']").value=jzed;
        if(parseFloat(jme)>parseFloat(jzed)){
          alert("本期减免税（费）额不能大于可减免金额,可减免金额为"+jzed);
          getObj("sbbVo['jme']").value="";
          return false;
          }else{
          getObj("sbbVo['sfjm']").value='Y';
          }
      }
	  calcSjjne();
	  return true;
	}


	function changeSsjmxzDm(){
     var ssjmxzdm=getObj("sbbVo['jmxzDm']").value;
     var jmeObj= getObj("sbbVo['jme']");
     jmeObj.value="";

     if(ssjmxzdm==""){
    	 jmeObj.readOnly=true;
    	 getObj("sbbVo['sfjm']").value="N";
     }else{

    	 jmeObj.readOnly=false;
    	 var flag='N';


    		 if(flag=='Y'){

    	      }else{
    	         alert("您选择的减免性质尚未到主管税务机关备案，请申报后尽快完成备案!");
    	         }
         }
     calcSjjne();
    }

    function modify(xh){
    if(confirm("是否修改 ？")){
    	var xgbz=document.getElementById("xgbz").value;
    	if(xgbz=='yes'){
    /*  location.href="/jsdzsb/fjssb/xgmap.do?xh="+xh; */
    	location.href="/jsdzsb/fjssb/xgjl.do?xh="+xh;
    	}else
    	 //location.href="/jsdzsb/fjssb/modify.do?xh="+xh+"";
    	 var url="/jsdzsb/fjssb/modify.do?xh="+xh+"";
    	 $("#myForm1").attr("action",url);
   	  	$("#myForm1").submit();
     }
    }
    function del(xh){
        if(confirm("是否删除 ？")){
         location.href="/jsdzsb/fjssb/delete.do?xh="+xh;
         }
        }

    function jyyjeChange(){
    	var hj=getObj("sbbVo['hj']").value;
    	var jyffjyjse=getObj("sbbVo['jyffjyjse']").value;
    	var sl='0.03';

    	if(toFixedNum(jyffjyjse, 2) > toFixedNum(parseFloat(hj) * parseFloat(sl), 2)){
    		alert("教育费附加已缴税（费）额   加 本期减免税额  不能 大于本期应纳税额 ");
    		getObj("sbbVo['jyffjyjse']").value='';
     	}
    }

    function dfjyyjeChange(){
    	var hj=getObj("sbbVo['hj']").value;
     	var dffjjyjse=getObj("sbbVo['dffjjyjse']").value;
     	var sl='0.02';

     	if (toFixedNum(dffjjyjse, 2) >  toFixedNum(parseFloat(hj) * parseFloat(sl), 2)){
       		alert("地方教育附加已缴税（费）额  加  本期减免税额  不能 大于本期应纳税额 ");
       		getObj("sbbVo['dffjjyjse']").value='';
       	}
    }
--></script>




    <div id="_loadIfmContent" style="display:none;"></div>
    <script language="JavaScript">
        $(function(){
            endIe8Load();
        });

        function endIe8Load() {
            try{
                var _loadIfm = ' <iframe id="_loadIfm" src="" width="1" height="1" style="border: 0px; display:none" frameborder="0" ></iframe>';
                if (!$("#_loadIfm")[0]) {
                    $("#_loadIfmContent").append(_loadIfm);
                }
                $("#_loadIfmContent", window.document).attr("src", "#");
            }catch(e){}
        }
    </script>

</body>


</html>